<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.buba.mapper.UserMapper">
    <insert id="addUser" parameterType="com.buba.model.User">
    INSERT INTO User(name,author) VALUES (#{name},#{author})
    </insert>
    <delete id="deleteUserById" parameterType="int">
        DELETE FROM User WHERE id=#{id}
    </delete>
    <update id="updateUserById" parameterType="com.buba.model.User">
        UPDATE User set name=#{name},author=#{author} WHERE id=#{id}
    </update>
    <select id="getUserById" parameterType="int" resultType="com.buba.model.User">
        SELECT * FROM User WHERE id=#{id}
    </select>
    <select id="getAllUsers" resultType="com.buba.model.User">
        SELECT * FROM User
    </select>
    <select id="pagedBySQL"  resultMap="userlist" parameterType="java.util.Map"> 	
         select * from t_sys_user u where 1=1
         <if test="params.user.account!=null and params.user.account!=''">
          and u.account like '%${params.user.account}%'
         </if>
          <if test="params.user.username!=null and params.user.username!=''">
          and u.username like '%${params.user.username}%'
         </if>
          <if test="params.user.islocked!=null and params.user.islocked!=''">
          and u.islocked like '%${params.user.islocked}%'
         </if>
         limit #{params.pageNumber} , #{params.pageSize}
   
    </select>
    <select id="count"  resultType="int" parameterType="java.util.Map"> 	
         select count(*) from t_sys_user u  where 1=1
         <if test="params.user.account!=null and params.user.account!=''">
          and u.account like '%${params.user.account}%'
         </if>
          <if test="params.user.username!=null and params.user.username!=''">
          and u.username like '%${params.user.username}%'
         </if>
          <if test="params.user.islocked!=null and params.user.islocked!=''">
          and u.islocked like '%${params.user.islocked}%'
         </if>
         
        <!--  where u.account like CONCAT ('%',#{user.account},'%') -->
    
    </select>
    <resultMap type="com.buba.model.User" id="userlist">
    <id column="id" property="id"></id>
    <result column="username"  property="username" ></result>
    <result column="account"  property="account" ></result>
    <result column="userpass"  property="userpass"></result>
    <result column="usertype"  property="usertype"></result>
    <result column="mobile"  property="mobile"></result>
     <result column="tel"  property="tel"></result>
    <result column="email"  property="email"></result>
    <result column="sex"  property="sex"></result>
    </resultMap>
    
    
    
</mapper>